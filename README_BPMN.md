# Генератор BPMN 2.0 диаграмм

Веб-приложение для генерации BPMN 2.0 диаграмм по текстовому описанию с точным позиционированием элементов.

## Возможности

- ✅ Генерация BPMN 2.0 диаграмм из структурированного описания (JSON)
- ✅ Поддержка swimlanes (горизонтальные дорожки по ролям)
- ✅ Элементы BPMN 2.0: события, задачи, подпроцессы, шлюзы (XOR/AND)
- ✅ Кросс-дорожечные связи
- ✅ Возвратные стрелки (циклы) с изогнутыми путями
- ✅ Подписи на всех развилках шлюзов
- ✅ Экспорт в PNG, SVG, PDF и BPMN XML
- ✅ UI для редактирования структуры процесса

## Установка и запуск

```bash
npm install
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`

## Структура данных

Приложение принимает структурированное описание процесса в формате JSON:

```json
{
  "lanes": ["Автор", "Система", "Согласующий"],
  "elements": [
    {
      "id": "start",
      "type": "startEvent",
      "label": "Начало",
      "lane": "Автор"
    },
    {
      "id": "t1",
      "type": "userTask",
      "label": "Создать договор",
      "lane": "Автор"
    }
  ],
  "flows": [
    {
      "from": "start",
      "to": "t1",
      "label": ""
    }
  ]
}
```

### Типы элементов

- `startEvent` - Стартовое событие
- `endEvent` - Конечное событие
- `task` - Задача
- `userTask` - Пользовательская задача
- `serviceTask` - Сервисная задача
- `subProcess` - Подпроцесс
- `xorGateway` - XOR шлюз (исключающее ИЛИ)
- `andGateway` - AND шлюз (параллельное выполнение)

## Алгоритм компоновки

Приложение использует кастомный алгоритм компоновки, который:

1. Строит граф зависимостей элементов
2. Выполняет топологическую сортировку
3. Группирует элементы по глубине в графе
4. Позиционирует элементы слева направо с учетом swimlanes
5. Минимизирует пересечения связей
6. Создает изогнутые пути для возвратных стрелок

## Экспорт

- **PNG** - растровое изображение высокого качества
- **PDF** - векторный документ в альбомной ориентации
- **BPMN XML** - стандартный формат BPMN 2.0 для импорта в другие инструменты
- **SVG** - векторное изображение (через BPMN XML)

## Технологии

- React 19
- bpmn-js - библиотека для работы с BPMN диаграммами
- html2canvas - экспорт в PNG
- jsPDF - экспорт в PDF
- Vite - сборщик и dev-сервер

## Планы развития

- [ ] Парсинг естественного языка (LLM интеграция)
- [ ] Импорт из Mermaid/PlantUML
- [ ] Улучшенный алгоритм компоновки с использованием dagre/ELK
- [ ] Цветовая кодировка элементов
- [ ] Редактирование диаграммы через drag-and-drop
- [ ] Сохранение проектов в localStorage

## Лицензия

MIT
